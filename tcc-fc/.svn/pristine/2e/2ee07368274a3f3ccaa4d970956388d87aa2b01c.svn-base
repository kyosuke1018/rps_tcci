<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui">
    <p:dialog header="#{msgUsermgmt['usermgmt.edituser.title']}"
              resizable="false"
              width="400"
              modal="true"
              widgetVar="editUserDlg">
        <h:panelGroup id="editUserGroup">
            <h:panelGrid columns="2">
                <h:outputLabel value="#{msgUsermgmt['usermgmt.label.loginaccount']}:"
                               for="editAccount"
                               styleClass="required"/>
                <p:inputText id="editAccount"
                             value="#{usermgmtController.editUser.loginAccount}"
                             readonly="#{empty usermgmtController.editUser.id ? false : true}"
                             styleClass="required"
                             onblur="trimInputToLower(this)"
                             size="30"
                             maxlength="60"/>
                <h:outputLabel value="#{msgUsermgmt['usermgmt.label.empid']}:"
                               for="editEmpId"/>
                <p:inputText id="editEmpId"
                             value="#{usermgmtController.editUser.empId}"
                             onblur="trimInput(this)"
                             size="30"
                             maxlength="20"/>
                <h:outputLabel value="#{msgUsermgmt['usermgmt.label.cname']}:"
                               for="editCname"/>
                <p:inputText id="editCname"
                             value="#{usermgmtController.editUser.cname}"
                             onblur="trimInput(this)"
                             size="30"
                             maxlength="20"/>
                <h:outputLabel value="#{msgUsermgmt['usermgmt.label.email']}:"
                               for="editEmail"/>
                <p:inputText id="editEmail"
                             value="#{usermgmtController.editUser.email}"
                             onblur="trimInput(this)"
                             size="30"
                             maxlength="60"/>
                <h:outputLabel value="是否停用:"
                               for="editDisabled"/>
                <h:selectOneRadio id="editDisabled"
                                  value="#{usermgmtController.editUser.disabled}">
                    <f:selectItem itemLabel="未停用" itemValue="#{false}"/>
                    <f:selectItem itemLabel="已停用" itemValue="#{true}"/>
                </h:selectOneRadio>
            </h:panelGrid>
            <hr/>
            <h:outputLabel value="#{msgUsermgmt['usermgmt.label.group']}: "/>
            <h:link onclick="RolesSelectAll(true);return false;">#{msgUsermgmt['usermgmt.label.selectall']}</h:link>
            <h:outputText value=" / "/>
            <h:link onclick="RolesSelectAll(false);return false;">#{msgUsermgmt['usermgmt.label.removeall']}</h:link>
            <div style="border: solid 1px; width: 100%; height: 130px; overflow: auto;">
                <h:selectManyCheckbox id="roleList"
                                      layout="pagedirection"
                                      value="#{usermgmtController.groupSelected}">
                    <f:selectItems value="#{usermgmtController.allGroup}"
                                   var="group"
                                   itemLabel="#{group.name}"
                                   itemValue="#{group.id}"/>
                </h:selectManyCheckbox>
            </div>
            <hr/>
            <h:panelGroup style="display:block; text-align:center;">
                <p:commandButton value="#{msgApp['app.button.save']}"
                                 icon="ui-icon-circle-check"
                                 action="#{usermgmtController.saveUser}"
                                 update=":form:listUser"
                                 onstart="return editUserDlg_OK()"
                                 oncomplete="editUserDlg_complete(xhr, status, args)"/>
                <p:spacer width="4" />
                <p:commandButton value="#{msgApp['app.button.cancel']}"
                                 icon="ui-icon-circle-close"
                                 onclick="editUserDlg.hide();return false;"/>
            </h:panelGroup>
        </h:panelGroup>
    </p:dialog>
</ui:composition>