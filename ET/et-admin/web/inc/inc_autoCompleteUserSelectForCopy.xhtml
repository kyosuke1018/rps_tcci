<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                >
    <h:form id="copyUserForm" prependId="false" >
        <p:dialog header="指定複製權限來源人員" id="dlgCopyUser" widgetVar="wvCopyUserDlg" 
                  modal="true" draggable="false" resizable="false" showEffect="clip" hideEffect="clip" >
            <h:panelGrid id="pgCopyUser" columns="2" style="margin-bottom:10px" cellpadding="5">  
                <p:outputLabel value="選取人員：" styleClass="fieldname" />
                <p:autoComplete size="30" value="#{controller.selectedUserTxt}" required="true" requiredMessage="您未選取人員!"
                                completeMethod="#{controller.autoCompleteCopyUserOptions}" 
                                onkeypress="ajaxStatusShow=false" onblur="ajaxStatusShow=true" 
                                dropdown="true" scrollHeight="240" 
                                >
                </p:autoComplete>
                <br/>
                <p:selectBooleanCheckbox value="#{controller.appendOnly}" itemLabel="權限複製只新增不刪除" styleClass="info" />
            </h:panelGrid>
            <p:separator />
            <h:graphicImage library="images" name="info.png" styleClass="icons" />
            <p:outputLabel value="請輸入姓名或帳號關鍵字，並於系統帶出符合條件名單中，點選指定人員。" styleClass="info" />
            <p:separator />
            <p:panelGrid columns="1" style="width:100%; text-align: center" >
                <h:panelGroup id="pgCopyUserEditSubmit" >
                    <!-- 確定按鈕 -->
                    <p:commandButton id="cbSaveCopyUser" value="#{msg['common.button.confirm']}" 
                                     actionListener="#{controller.selectCopyUser()}"  
                                     update="#{updateUI}" 
                                     oncomplete="closeCopyUserDlg();" 
                                     icon="ui-icon-circle-check" 
                                     ></p:commandButton><!-- update all form -->
                    <p:spacer width="5" />
                    <!-- 取消按鈕 -->
                    <p:commandButton id="cbCloseCopyUser" 
                                     onclick="closeCopyUserDlg();"
                                     value="#{msg['common.button.cancel']}" type="button"
                                     icon="ui-icon-circle-close" ></p:commandButton>
                </h:panelGroup>
            </p:panelGrid>
        </p:dialog>
    </h:form>
    
    <script type="text/javascript">
        //<![CDATA[
        function openCopyUserDlg(){
            PF('wvCopyUserDlg').show();
        }
        function closeCopyUserDlg(){
            PF('wvCopyUserDlg').hide();
        }
        //]]>
    </script>
</ui:composition>
