<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:p="http://primefaces.org/ui">
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"></meta>
    <f:view contentType="text/html">
        <h:head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <title><ui:insert name="title"/></title>
            <!-- browser tab icon (or put favicon.ico in the root directory) -->
            <link rel="icon" href="#{resource['images:logo.png']}" />
            <ui:insert name="head"></ui:insert>
            
            <h:outputStylesheet library="css" name="rwd_stylesheet_new.css"/>
            <h:outputStylesheet library="css" name="stylesheet_new.css"/>
            <h:outputStylesheet library="css" name="stylesheet_table.css"/>
            
            <h:outputScript library="js" name="UIUtils.js" />
            <h:outputScript library="js" name="ajaxCheck.js" />
            <h:outputScript library="js" name="jquery.floatDiv.js" />
            <!--<h:outputScript library="js" name="app.js"/>-->
            <h:outputScript library="js" name="d3.v3.min.js"/>
            <h:outputScript library="js" name="dagre-d3.min.js"/>
            <h:outputScript library="js" name="graphlib-dot.min.js"/>
            <h:outputScript name="js/nanoscroller.js" library="omega-layout" />
            <h:outputScript name="js/layout.js" library="omega-layout" />
        
            <!-- jquery datepicker locales -->
            <script type="text/javascript" src="#{request.contextPath}/lib/external/jquery/datepicker-zh-TW.js"></script>
            <script type="text/javascript" src="#{request.contextPath}/lib/external/jquery/datepicker-zh-CN.js"></script>
            
            <style  type="text/css">
                .ui-fieldset-legend .ui-corner-all .ui-state-default {
                    background: none;
                }
                /*.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default{
                    background: none;
                }*/
                .ui-menubar .ui-menuitem-link {
                    padding-bottom: 0px;
                }
                span.ui-menuitem-text {
                    margin-bottom: 1px;
                }
                .ui-menuitem-text {
                    text-align: left;  
                }
                .ui-widget-content tr {
                    border-style: none;
                }
                /* for primefaces 5.x */
                /*.ui-panelgrid td {
                        border-style: none;
                }*/
                .ui-panelgrid .ui-panelgrid-cell {
                    border: none;
                }
                /* 5.1.x 不需要
                .ui-datatable table, .ui-datatable-resizable table {
                    table-layout: auto !important;
                }
                .ui-datatable-scrollable table {
                    table-layout: fixed !important;
                }*/
                /*.ui-datatable thead th {
                    width: 80px;
                }*/
                .ui-datatable tbody td {
                    /* Non standard for webkit　// word-break: break-word; */
                    -ms-word-break: break-all;
                    word-break: break-all;
                    -webkit-hyphens: auto;
                    -moz-hyphens: auto;
                    hyphens: auto;
                }
                /*fieldset .ui-fieldset-legend {
                    height: 10px;
                }*/
                .ui-selectonemenu {
                    vertical-align: middle;
                }
                .ui-chkbox {
                    vertical-align: middle;
                }
                /*
                li.ui-widget.ui-menuitem.ui-corner-all.ui-menu-parent.topmenu.ui-menuitem-active > ul {
                    width: 200px;
                }
                li.ui-widget.ui-menuitem.ui-corner-all.ui-menu-parent.topmenu.ui-menuitem-active > ul > table > tbody > tr > td > ul > li.ui-widget-header.ui-corner-all{
                    width: 198px;
                }
                */
                .ui-menubar .ui-menu-child .ui-menuitem {
                    width: 152px;
                }
                .ui-menubar .ui-menu-child .ui-menuitem > a > span {
                    width: 150px;
                }
                /* 5.1.x 不需要
                .ui-selectonemenu-filter-container {
                    width: 98% !important;
                }*/
                /* ui-menu-list
                .ui-chkbox-box {
                    margin-left: 3px;
                    margin-right: 3px;
                }
                div.ui-chkbox {
                    vertical-align: middle;
                }*/
                /* 避免 panelGrid 範圍背景問題 */
                /*tr.ui-widget-content {
                    background: none;
                }*/
                .ui-menubutton .ui-state-default .ui-icon {
                    width: 17px;
                    height: 16px; 
                    /*background: #f8f7f6; #654b24 #f8f7f6 */
                    /*background-image: url("#{resource['images:setting.png']}") ;*/
                    background: url("#{resource['images:setting.png']}") no-repeat;
                }
                .ui-menubutton .ui-state-default {
                    width: 35px;
                }
                .userError {
                    padding: 30px 0;
                    color: red;
                    font-size: 2em;
                    font-weight: bold;
                    text-align: center;
                }
                .plTree .ui-panel-content {
                    padding-left: 2px;
                    padding-right: 2px; 
                    width: 99%;
                    max-height: 450px;
                    max-width: 250px;
                    overflow: auto;
                }
                /* 多選 autocomplete */
                .multiAC .ui-autocomplete-multiple-container {
                    width: 500px;
                }
                .multiAC1 .ui-autocomplete-multiple-container {
                    width: 280px;
                }
                .vat {
                    vertical-align: top;
                }
                .vam {
                    vertical-align: middle;
                }
                .tac {
                    text-align: center;
                }
                .tar {
                    text-align: right;
                }
                .ui-datatable-tablewrapper > td > .ui-inputtext {
                    width:94%;
                }
            </style>
            <script type="text/javascript">
                //<![CDATA[
                function resizeTree(flag){
                    var w = $(".plTree .ui-panel-content").css("max-width");
                    w = w.replace("px", "");
                    var wi = (flag)? w*1+100:w*1-100;
                    if( wi>650 ){ wi=650; }
                    if( wi<250 ){ wi=250; }
                    $(".plTree .ui-panel-content").css("max-width", wi+"px");
                    return false;
                }
                
                // 定義 USER 有在 UI 做異動時執行 function 變數，實際需要的頁面再 override
                var doModify = function(){};
                var cancelModify = function(){};
                var checkNoSave = function(){ return true; };

                //除了input text, textarea外，停用Backsapce，防止不慎回前一頁
                $(function () {
                    $(document).keydown(function (e) {
                        if (e.which === 8 && !(e.target.type === "text" || e.target.type === "textarea")){
                            e.preventDefault();
                        }
                    });

                    // 檢查有暫存頁功能，異動是否已儲存 (搭配 JsfUtils.java: newMenuItem() 的 setStyleClass("myMenuItem"))
                    $(".myMenuItem").on('click', function(){
                        if( !checkNoSave() ){ return false; };
                    });

                    // check browser
                    checkIEVersionAbove(8);

                    // PF 6.X 不需要
                    // for datatable resize in chrome 
                    //doResize();
                    //$( window ).resize(function() {
                    //    doResize();
                    //});

                    // for Check Action
                    keepAliveURL = "#{request.contextPath}"+keepAliveURL;
                    startCheckAction();
                    $(document).bind('change click keypress keydown focus mousemove', function(e) {
                        onAction();
                    });
                    $(document).bind('unload', function(e) {
                        stopCheckAction();
                    }); 
                });
                //]]>
            </script>
        </h:head>
        <h:body styleClass="main-body menu-layout-overlay">
            <!--<h:body id="body"  >-->
            <h:panelGroup id="_hiddenInfo_" style="display:none" >
                <p:outputLabel id="_systime_" value="#{app.systime}" ></p:outputLabel>
                <p:outputLabel id="_serverIP_" value="#{app.serverIpAddress}" ></p:outputLabel>
            </h:panelGroup>
            <div class="wrapper">
                <ui:include src="../jsff/topbar.xhtml" />
                <ui:include src="../jsff/sidebar.xhtml" />
                
                <div class="div_right_bottom">
                    <!-- 回頁面頂端 -->
                    <h:graphicImage library="images" name="Top.png" 
                                    onclick="gotoTop()"
                                    title="#{msg['label.goToPageTop']}"
                                    style="width: 32px; height: 32px; cursor: pointer" />
                </div>
                <div id="header">
                    <!--<ui:include src="../inc/inc_pageHeader.xhtml"/>-->
                    <ui:include src="../inc/inc_ajaxStatusDlg.xhtml"/>
                    <ui:include src="../inc/inc_statusDlgBlockUI.xhtml"/>
                </div>            
                <div id="content">
                    <h:panelGroup rendered="#{tcSessionController.login}">
                        <ui:insert name="content"/>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{!tcSessionController.login}">
                        <div class="userError">
                            <!-- 此帳號無本系統權限, 請填[帳號權限申請單]申請或洽台訊客服 (service@tcci.com.tw) -->
                            <h:outputText value="#{msg['label.noAccount']}"/>
                        </div>
                    </h:panelGroup>
                </div>
                <ui:include src="../jsff/pageFooter_rwd.xhtml"/>
            </div>   
            
            <h:outputStylesheet name="css/animate.css" library="omega-layout" />
            <h:outputStylesheet name="css/nanoscroller.css" library="omega-layout" />
            <h:outputStylesheet name="css/layout.css" library="omega-layout" />
        </h:body>
    </f:view>
</html>
