<!doctype html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="robots" content="noindex、nofollow" />
    <meta name="viewport" content="width=device-width" />
    <title>台泥陽光採購平台</title>
    <link rel="icon" 	   type="image/x-icon"	href="img/logo.ico" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.0/css/all.css" integrity="sha384-Mmxa0mLqhmOeaE8vgOSbKacftZcsNYDjQzuCOm6D02luYSzBG8vpaOykv9lFQ51Y" crossorigin="anonymous">
    <link rel="stylesheet" href="css/jquery-ui.css" />
    <link rel="stylesheet" href="css/style-comm.css" />
    <link rel="stylesheet" href="css/style-userBindVenderCode.css" />
</head>

<body>
	<div id="headerField" class="headerField">
		<div id="header"></div>
	</div>        
    
    <div id="container">
        <div class="cover"></div>
        <div class="section">
            <div class="form">
                <div class="caption">綁定供應商<span class="note"></span></div>
                <div id="venderCode" class="customInput"></div>
                <div id="venderName" class="customInput"></div>
                <div class="btn">送 出</div>
            </div>
        </div>
    </div>
    
	<div id="footerField">
		<div id="footer"></div>
	</div>
    
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui-accordion.min.js"></script>
    <script src="js/content-ajax.js"></script>
    <script src="js/content.js"></script>
    <script>
        $(function(){            
            initHeadFoot();
        });
        
        var venderCodeInput = new customInput("venderCode", "text", "供應商代號");
        var venderNameInput = new customInput("venderName", "text", "公司全名");

        $(".form .btn").click(function(){
            submitData();
        });
        
        function submitData(){
            //確認全部欄位是否有空白
            var validEmptyOK = validInputEmpty($(".customInput input"));

            if(validEmptyOK){
                var restUrl = REST_URL + "services/vender/apply";
                var formData = {
                    memberId: MEMBER_ID,
                    applyVenderCode: venderCodeInput.getVal(),
                    applyVenderName: venderNameInput.getVal()
                }
                ajaxPostData(restUrl, formData);
            }
        }
        
        function fetchData(response){
            if(response.res.status == 1)
                alert("供應商綁定成功");
            else
                alert("供應商綁定失敗，請重新輸入");
            
            location.reload();
        }
	</script>
</body>
</html>