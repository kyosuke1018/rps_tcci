<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui">

    <p:scrollPanel style="width: 892px; height: 350px" mode="native">
        <p:dataTable id="worklist"
                     value="#{salesDocumentController.ztabExpRelfilenoSdVODataModel}"
                     var="item"
                     >
            <p:column>
                <f:facet name="header">
                    <p:selectBooleanCheckbox value="#{salesDocumentController.selectAll}">
                        <p:ajax event="change" 
                                listener="#{salesDocumentController.selectAllChange}"
                                update="worklist"/>
                    </p:selectBooleanCheckbox>
                </f:facet>
                <p:selectBooleanCheckbox value="#{item.selected}" rendered="#{item.reviewable}"/>
            </p:column>
            <p:column style="white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.vkbrp']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.vkgrp}"/>
            </p:column>
            <p:column style="white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.dbrtg']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.dbrtg}"/>
            </p:column>
            <p:column style="white-space: nowrap" rendered="#{salesDocumentController.filter.bersl eq 'SKPCSD03'}">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.altkn']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.altkn}"/>
            </p:column>
            <p:column style="white-space: nowrap" rendered="#{salesDocumentController.filter.bersl eq 'SKPCSD03'}">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.pstlz']}"/>
                </f:facet>
                <h:outputText value="X"
                              rendered="#{item.ztabExpRelfilenoSd.pstlz.length()>0}"/>
                <br/>
                <h:outputText value="(#{item.ztabExpRelfilenoSd.pstlz} - #{item.ztabExpRelfilenoSd.ort01})"
                              rendered="#{item.ztabExpRelfilenoSd.pstlz.length()>0}"/>
            </p:column>
            <p:column style="text-align:left; white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.kunnr']}/#{msgW['sd.name1']}"/>
                </f:facet>
                <p:commandLink value="#{item.ztabExpRelfilenoSd.kunnr}"
                               oncomplete="PF('salesDetailHistoryDialog').show();" 
                               action="#{salesDetailHistoryDialogController.initDialogByCustomer(item.ztabExpRelfilenoSd.kunnr)}"
                               update="salesDetailHistoryDialogId"
                               />
                <br/>
                <h:outputText value="#{item.ztabExpRelfilenoSd.name1}"/>
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.bersl']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.bersl}"/>
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.audat']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.audat}">
                    <f:convertDateTime pattern="yyyy/MM/dd"/>
                </h:outputText>
            </p:column>

            <p:column style="text-align:right;white-space: nowrap;#{salesDocumentController.getLevelColor(item.ztabExpRelfilenoSd.bstzd)}">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.vbeln']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.vbeln}"/>
            </p:column>
            <p:column style="white-space: nowrap;text-align: left;">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.arktx']}"/>
                </f:facet>
                <p:commandLink value="#{item.ztabExpRelfilenoSd.matnr}"
                               oncomplete="PF('salesDetailHistoryDialog').show();" 
                               action="#{salesDetailHistoryDialogController.initDialogByCustomerProduct(item.ztabExpRelfilenoSd.kunnr,item.ztabExpRelfilenoSd.matnr)}"
                               update="salesDetailHistoryDialogId"
                               />
                <br/>
                <h:outputText value="#{item.ztabExpRelfilenoSd.arktx}"/>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap;#{salesDocumentController.getPriceLevelColor(item.ztabExpRelfilenoSd.bstzd)}">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.aspS']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.aspS}">
                    <f:convertNumber pattern="0.00"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.itmpf']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.itmpf}">
                    <f:convertNumber pattern="0.00"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap;#{salesDocumentController.getPriceLevelColor(item.ztabExpRelfilenoSd.bstzd)}">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.asp']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.asp}">
                    <f:convertNumber pattern="0.00"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap;#{salesDocumentController.getQuantityLevelColor(item.ztabExpRelfilenoSd.bstzd)}">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.kwmeng']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.kwmeng}">
                    <f:convertNumber pattern="0"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.free']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.free}">
                    <f:convertNumber pattern="0"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.itmdn']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.itmdn}">
                    <f:convertNumber pattern="0.00"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.qtydf']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.qtydf}">
                    <f:convertNumber pattern="0"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.netwr']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.netwr}">
                    <f:convertNumber pattern="#,###,###"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.discount']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.discount}">
                    <f:convertNumber pattern="#,###,###"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.prmng']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.prmng}">
                    <f:convertNumber pattern="0"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.praspS']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.praspS}">
                    <f:convertNumber pattern="0.00"/>
                </h:outputText>
            </p:column>
            <p:column style="text-align:right;white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.prasp']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.prasp}">
                    <f:convertNumber pattern="0.00"/>
                </h:outputText>
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.commentAB']}"/>
                </f:facet>
                <p:selectBooleanCheckbox value="#{item.commentAB}" 
                                         rendered="#{item.reviewable}"/>
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.commentVQ']}"/>
                </f:facet>
                <p:selectBooleanCheckbox value="#{item.commentVQ}" 
                                         rendered="#{item.reviewable}"/>
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.comment']}"/>
                </f:facet>
                <p:inputText size="60" value="#{item.ztabExpRelfilenoSd.relText}" rendered="#{item.reviewable}"/>
            </p:column>
            <p:column style="white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.name']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.name}"/>
            </p:column>
            <p:column style="white-space: nowrap">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.posnr']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.posnr}"/>
            </p:column>
            <p:column rendered="false">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.bstzd']}"/>
                </f:facet>
                <h:outputText value="#{item.ztabExpRelfilenoSd.bstzd}"/>
            </p:column>
            <p:column style="white-space: nowrap;#{salesDocumentController.getLevelColor(item.ztabExpRelfilenoSd.bstzd)}">
                <f:facet name="header">
                    <h:outputText value="#{msgW['sd.bstzd']}"/>
                </f:facet>
                <h:outputText value="#{salesDocumentController.getBstzdDisplayName(item.ztabExpRelfilenoSd.bstzd)}"/>
            </p:column>
        </p:dataTable>
    </p:scrollPanel>
    <ui:include src="salesDetailHistoryDialog.xhtml"/>
</ui:composition>