<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                >
    <h:form prependId="false" id="transactionForm">
        <p:dialog header="#{msg['quotation.history']} (#{queryQuotation.selectedProduct})"
                  id="transactionDialog"
                  widgetVar="transctionDialogVar"
                  resizable="false"            
                  width="900"
                  height="500"
                  modal="true">           
    <p:dataTable id="customerSalesOrdertbl" rows="#{includeFrom eq 'customer_report' ? 5 : 10}" value="#{queryQuotation.orderList}" var="row" paginator="true"
                 rowStyleClass="#{row.gift ? 'gift-row' : null}" 
                 >
        <p:column headerText="#{msg['customer']}" style="text-align:left">
            <h:outputText value="#{row.customerSimpleCode}" rendered="#{!row.gift}"/>
            <br/>
            <h:outputText value="#{row.customerName}" rendered="#{!row.gift}"/>
        </p:column>
        <p:column headerText="#{msg['invoice.number']}/#{msg['invoice.date']}" sortBy="#{row.invoiceTimestamp}" style="text-align: left;">
            <h:outputText value="#{row.invoiceNumber}" rendered="#{!row.gift}"/>
            <br/>
            <h:outputText value="#{row.invoiceTimestamp}" rendered="#{!row.gift and not empty row.invoiceNumber}">
                <f:convertDateTime pattern="yyyy/MM/dd"/>
            </h:outputText>                
        </p:column>
        <p:column headerText="#{msg['order.number']}/#{msg['invoice.amount']}" style="text-align:left">
            <h:outputText value="#{row.orderNumber}" rendered="#{!row.gift}"/>   
            <br/>
            <h:outputText value="#{row.invoiceTotalAmount}" rendered="#{!row.gift}">
                <f:convertNumber currencySymbol="$" groupingUsed="true" type="currency" maxFractionDigits="0"/>
            </h:outputText>              
        </p:column>            
        <p:column headerText="#{msg['product']}" style="text-align:left">            
            <h:outputText value="#{row.productNumber}" rendered="#{!row.gift}"/><h:outputText value="【#{row.lotNumber}】" rendered="#{!row.gift}"/>           
            <br/>
            <h:outputText value="#{row.productName}" rendered="#{!row.gift}"/>
        </p:column>                    
        <p:column headerText="#{msg['quantity']}/#{msg['unit']}" style="text-align:right">
            <h:outputText value="#{row.quantity}"/>
            <br/>
            <h:outputText value="#{row.unit}"/>  
        </p:column>
        <p:column headerText="#{msg['price']}/(#{msg['gift']})" style="text-align:right">
            <h:outputText value="#{row.sellingPrice}" rendered="#{!row.gift}">            
                <f:convertNumber groupingUsed="true"/>
            </h:outputText>
            <h:outputText value="#{msg['gift']}" rendered="#{row.gift}"/>                
        </p:column>
        <p:column headerText="#{msg['amount']}" style="text-align:right; white-space: nowrap;">           
            <h:outputText value="#{row.invoiceAmount}" rendered="#{!row.gift}"
                          >
                <f:convertNumber currencySymbol="$" groupingUsed="true" type="currency" maxFractionDigits="0"/>
            </h:outputText>                    
        </p:column>        
        <p:column headerText="#{msg['premium.discount']}" style="text-align:right">
            <h:outputText value="#{row.premiumDiscount + row.premiumDiscountTax}" rendered="#{!row.gift}">
                <f:convertNumber groupingUsed="true"/>
            </h:outputText>                          
        </p:column>
    </p:dataTable> 
            <h:panelGrid columns="1" style="width: 100%;text-align: center;">
                <h:panelGroup>
                    <p:commandButton icon="ui-icon-close"
                                     value="#{msg['button.close']}"
                                     immediate="true"
                                     oncomplete="PF('transctionDialogVar').hide()"/>
                </h:panelGroup>
            </h:panelGrid>
        </p:dialog> 
    </h:form>    
</ui:composition>

