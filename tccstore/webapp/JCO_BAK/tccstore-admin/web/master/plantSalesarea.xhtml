<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/generalPageTemplate.xhtml">
    <ui:define name="title">出货工厂-销售区域</ui:define>
    <ui:define name="content">
        <p:panel header="出货工厂-销售区域">
            <h:form id="form" prependId="false">
                <p:fieldset legend="#{msgApp['app.fieldset.queryfilter']}">
                    <h:panelGrid columns="6" width="100%">
                        <h:outputLabel value="出货工厂:"/>
                        <p:autoComplete id="plant"
                                        value="#{plantSalesareaQuery.plantCode}"
                                        dropdown="true"
                                        forceSelection="true"
                                        completeMethod="#{plantSalesareaQuery.completePlant}"
                                        var="plant"
                                        itemLabel="#{plant.displayIdentifier}"
                                        itemValue="#{plant.code}"
                                        maxResults="15">
                            <p:column style="white-space: nowrap;">
                                #{plant.code}
                            </p:column>
                            <p:column style="white-space: nowrap;">
                                #{plant.name}
                            </p:column>
                        </p:autoComplete>
                        <h:outputLabel value="销售区域:"/>
                        <p:autoComplete id="salesarea"
                                        value="#{plantSalesareaQuery.salesareaCode}"
                                        dropdown="true"
                                        forceSelection="true"
                                        completeMethod="#{plantSalesareaQuery.completeSalesarea}"
                                        var="salesarea"
                                        itemLabel="#{salesarea.displayIdentifier}"
                                        itemValue="#{salesarea.code}"
                                        maxResults="15">
                            <p:column style="white-space: nowrap;">
                                #{salesarea.code}
                            </p:column>
                            <p:column style="white-space: nowrap;">
                                #{salesarea.name}
                            </p:column>
                        </p:autoComplete>
                    </h:panelGrid>
                    <p:commandButton value="#{msgApp['app.button.query']}"
                                     icon="ui-icon-search"
                                     action="#{plantSalesareaQuery.query()}"
                                     update=":form:result"/>
                </p:fieldset>
                <br/>
                <p:fieldset legend="#{msgApp['app.fieldset.queryresult']}">
                    <p:dataTable id="result"
                                 value="#{plantSalesareaQuery.result}"
                                 var="row"
                                 rows="15"
                                 paginator="true"
                                 tableStyle="table-layout: auto;">
                        <f:facet name="header">  
                            <h:commandLink>
                                <h:graphicImage library="images" name="excel_exports.png" />
                                <p:dataExporter type="xls" target="result" fileName="PlantSalesarea"/>
                                <h:outputText value="汇出excel"/>
                            </h:commandLink>
                        </f:facet>  
                        <p:column headerText="厂代码">
                            <h:outputText value="#{row.ecPlant.code}"/>
                        </p:column>
                        <p:column headerText="厂名称">
                            <h:outputText value="#{row.ecPlant.name}"/>
                        </p:column>
                        <p:column headerText="销售区域代码">
                            <h:outputText value="#{row.ecSalesarea.code}"/>
                        </p:column>
                        <p:column headerText="销售区域名称">
                            <h:outputText value="#{row.ecSalesarea.name}"/>
                        </p:column>
                    </p:dataTable>
                </p:fieldset>
            </h:form>
        </p:panel>            
    </ui:define>
</ui:composition>