<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/generalPageTemplate.xhtml">
    <ui:define name="title">送达地点</ui:define>
    <ui:define name="content">
        <p:panel header="送达地点">
            <h:form id="form" prependId="false">
                <p:fieldset legend="#{msgApp['app.fieldset.queryfilter']}">
                    <h:panelGrid columns="6" width="100%">
                        <h:outputLabel value="代码/名称:"/>
                        <p:inputText value="#{deliveryPlaceQuery.queryFilter.codeName}"/>
                        <h:outputLabel value="省:"/>
                        <p:selectOneMenu value="#{deliveryPlaceQuery.queryFilter.province}">
                            <f:selectItem itemLabel="" itemValue=""/>
                            <f:selectItems value="#{deliveryPlaceQuery.provinces}"/>
                        </p:selectOneMenu>
                        <h:outputLabel value="市:"/>
                        <p:inputText value="#{deliveryPlaceQuery.queryFilter.city}"/>
                        <h:outputLabel value="区:"/>
                        <p:inputText value="#{deliveryPlaceQuery.queryFilter.district}"/>
                        <h:outputLabel value="镇:"/>
                        <p:inputText value="#{deliveryPlaceQuery.queryFilter.town}"/>
                        <h:outputLabel value="销售区域:"/>
                        <p:autoComplete id="salesarea"
                                        value="#{deliveryPlaceQuery.salesareaCode}"
                                        dropdown="true"
                                        forceSelection="true"
                                        completeMethod="#{deliveryPlaceQuery.completeSalesarea}"
                                        var="salesarea"
                                        itemLabel="#{salesarea.displayIdentifier}"
                                        itemValue="#{salesarea.code}"
                                        maxResults="15">
                            <p:column style="white-space: nowrap;">
                                #{salesarea.code}
                            </p:column>
                            <p:column style="white-space: nowrap;">
                                #{salesarea.name}
                            </p:column>
                        </p:autoComplete>
                    </h:panelGrid>
                    <p:commandButton value="#{msgApp['app.button.query']}"
                                     icon="ui-icon-search"
                                     action="#{deliveryPlaceQuery.query()}"
                                     update=":form:result"/>
                </p:fieldset>
                <br/>
                <p:fieldset legend="#{msgApp['app.fieldset.queryresult']}">
                    <p:dataTable id="result"
                                 value="#{deliveryPlaceQuery.result}"
                                 var="row"
                                 rows="15"
                                 paginator="true"
                                 tableStyle="table-layout: auto;">
                        <f:facet name="header">  
                            <h:commandLink>
                                <h:graphicImage library="images" name="excel_exports.png" />
                                <p:dataExporter type="xls" target="result" fileName="DeliveryExport"/>
                                <h:outputText value="汇出excel"/>
                            </h:commandLink>
                        </f:facet>  
                        <p:column headerText="代码">
                            <h:outputText value="#{row.code}"/>
                        </p:column>
                        <p:column headerText="名称">
                            <h:outputText value="#{row.name}"/>
                        </p:column>
                        <p:column headerText="省">
                            <h:outputText value="#{row.province}"/>
                        </p:column>
                        <p:column headerText="市">
                            <h:outputText value="#{row.city}"/>
                        </p:column>
                        <p:column headerText="区">
                            <h:outputText value="#{row.district}"/>
                        </p:column>
                        <p:column headerText="镇">
                            <h:outputText value="#{row.town}"/>
                        </p:column>
                        <p:column headerText="销售区域代码">
                            <h:outputText value="#{row.ecSalesarea.code}"/>
                        </p:column>
                        <p:column headerText="销售区域名称">
                            <h:outputText value="#{row.ecSalesarea.name}"/>
                        </p:column>
                        <p:column headerText="启用">
                            <h:outputText value="#{row.active ? '1':'0'}"/>
                        </p:column>
                    </p:dataTable>
                </p:fieldset>
            </h:form>
        </p:panel>            
    </ui:define>
</ui:composition>