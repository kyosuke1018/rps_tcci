<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui">
    <p:fieldset id="fieldset_sheetData" legend="匯入資料預覽">
        <h:outputText value="(共#{importController.filtedlist.size()}筆)" rendered="#{importController.filtedlist != null}" />
        <h:selectBooleanCheckbox id="invalidOnly_sheetData"
                                 value="#{importController.invalidOnly}">
            <p:ajax event="click" 
                    listener="#{importController.invalidOnlyChange}"
                    update="@form:tabview:fieldset_sheetData"/>
        </h:selectBooleanCheckbox>
        <h:outputLabel value="只顯示錯誤列" for="invalidOnly_sheetData"/>
        <p:dataTable id="datalist_sheetData"
                     value="#{importController.filtedlist}"
                     var="row"
                     rows="10"
                     paginator="true"
		     scrollable="true"
		     styleClass="ui-datatable-tablewrapper"
                     rowStyleClass="#{row.valid ? '' : 'ui-state-error'}">
            <p:column headerText="ROW#" sortBy="#{row.rowIndex}" width="60">
                <h:outputText value="#{row.rowIndex}"/>
            </p:column>
<!--待補-->
<ui:include src="inc_pcolumns_ztcoRelaGui.xhtml"/>
<!---->
            <p:column headerText="訊息" sortBy="#{row.message}" width="240">
                <h:outputText value="#{row.message}"/>
            </p:column>
        </p:dataTable>
    </p:fieldset>
</ui:composition>