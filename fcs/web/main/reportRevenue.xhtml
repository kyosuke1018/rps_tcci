<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/generalPageTemplate.xhtml">
    <ui:define name="title">#{msgApp['consolidationRevenue.msg.txt2']}</ui:define>
    <ui:define name="content">
        <p:panel header="#{msgApp['consolidationRevenue.msg.txt2']}">
            <h:form id="form" prependId="false">
		<p:selectOneMenu value="#{reportRevenue.groupCondition}">
                    <f:selectItems value="#{reportRevenue.groupsOptionList}"/>
		    <p:ajax oncomplete="doChangeGroup()" />
                </p:selectOneMenu>
		<p:remoteCommand name="doChangeGroup"
                                 actionListener="#{reportRevenue.changeGroup()}"
                                 update=":form"/>
                <h:outputLabel value="#{msgApp['app.label.report.ym']}:"/>
                <h:outputText value="#{reportRevenue.yearmonth}" styleClass="rptYearMonth"/>
		<h:outputLabel value=" | "/>
                <h:commandLink title="#{msgApp['consolidationRevenue.msg.txt18']}"
                               actionListener="#{reportRevenue.exportRevenue}"
                               immediate="true"
                               onclick="monitorDownload();"
                               rendered="#{!reportRevenue.noPermission}">
                    <p:fileDownload value="#{reportRevenue.exportFile}"/>
                    <h:graphicImage library="images" name="excel.png"/>
                    <h:outputText value="#{msgApp['consolidationRevenue.msg.txt18']}"/>
                </h:commandLink>
                <h:panelGroup id="pgChange" rendered="#{reportRevenue.groupCondition.code eq 'CSRC'}">
                    <h:outputLabel value=" | "/>
                    <h:commandLink title="#{msgApp['consolidationRevenue.msg.txt18']}(#{msgApp['consolidationRevenue.msg.txt20']})"
                                   actionListener="#{reportRevenue.exportRevenueOri}"
                                   immediate="true"
                                   onclick="monitorDownload();"
                                   rendered="#{!reportRevenue.noPermission}">
                        <p:fileDownload value="#{reportRevenue.exportFile}"/>
                        <h:graphicImage library="images" name="excel.png"/>
                        <h:outputText value="#{msgApp['consolidationRevenue.msg.txt18']}(#{msgApp['consolidationRevenue.msg.txt20']})"/>
                    </h:commandLink>
                </h:panelGroup>
                
                <p:fieldset legend="#{msgApp['app.label.note']}" toggleable="true"
                            rendered="#{reportRevenue.groupCondition.code eq 'CSRC'}">
                    <p:outputLabel value="原幣別報表不顯示公司合計金額" /><br/>
                </p:fieldset>  
            </h:form>
        </p:panel>
    </ui:define>
</ui:composition>